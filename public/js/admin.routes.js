webpackJsonp([2],{

/***/ 0:
/***/ function(module, exports, __webpack_require__) {

	"use strict";
	
	var React = __webpack_require__(1);
	var Router = __webpack_require__(158);
	var DefaultRoute = Router.DefaultRoute;
	var RouteHandler = Router.RouteHandler;
	var Route = Router.Route;
	
	var PageRoutes = __webpack_require__(207);
	var PageRoute = __webpack_require__(208);
	
	var App = React.createClass({
	  displayName: "App",
	
	  render: function render() {
	    return React.createElement(RouteHandler, this.props);
	  }
	});
	
	var routes = React.createElement(
	  Route,
	  { handler: App },
	  React.createElement(DefaultRoute, { name: "routes", handler: PageRoutes }),
	  React.createElement(Route, { name: "route", path: ":key", handler: PageRoute })
	);
	
	Router.run(routes, Router.HashLocation, function (Handler, state) {
	  React.render(React.createElement(Handler, { routes: state.routes, params: state.params, query: state.query }), document.getElementById("react-root"));
	});

/***/ },

/***/ 207:
/***/ function(module, exports, __webpack_require__) {

	"use strict";
	
	var React = __webpack_require__(1);
	
	var Router = __webpack_require__(158),
	    Link = Router.Link;
	
	var FilterList = __webpack_require__(198),
	    RenderUtils = __webpack_require__(200);
	
	module.exports = React.createClass({
	  displayName: "exports",
	
	  render: function render() {
	    return React.createElement(
	      "div",
	      { className: "page-routes" },
	      React.createElement(FilterList, {
	        ajaxUrl: "/admin/routes?format=json",
	        ajaxResponseDataMapper: this._mapAjaxData,
	        itemDisplayNameFormatter: this._getItemDisplayName,
	        itemRoute: "route" })
	    );
	  },
	
	  _mapAjaxData: function _mapAjaxData(data) {
	    data = data || {};
	
	    return (data.routes || []).map(function (r) {
	      // GET /example/path  -- >  get/example/path
	      r.key = r.method.toLowerCase() + r.url.toLowerCase();
	
	      return r;
	    });
	  },
	
	  _getItemDisplayName: function _getItemDisplayName(item) {
	    return React.createElement(
	      "span",
	      null,
	      React.createElement(
	        "span",
	        { className: "method" },
	        item.method.toUpperCase()
	      ),
	      React.createElement(
	        "span",
	        { className: "url" },
	        item.url
	      )
	    );
	  } });

/***/ },

/***/ 208:
/***/ function(module, exports, __webpack_require__) {

	"use strict";
	
	var React = __webpack_require__(1);
	
	var Router = __webpack_require__(158);
	
	var Loader = __webpack_require__(199),
	    SubmitBtn = __webpack_require__(203),
	    JsonEditor = __webpack_require__(202),
	    CodeView = __webpack_require__(197),
	    RenderUtils = __webpack_require__(200),
	    GuardedStateMixin = __webpack_require__(201);
	
	module.exports = React.createClass({
	  displayName: "exports",
	
	  contextTypes: {
	    router: React.PropTypes.func
	  },
	
	  mixins: [GuardedStateMixin],
	
	  getInitialState: function getInitialState() {
	    var key = decodeURIComponent(this.context.router.getCurrentParams().key),
	        slashPos = key.indexOf("/"),
	        method = key.substr(0, slashPos).toUpperCase(),
	        url = key.substr(slashPos);
	
	    return {
	      url: url,
	      method: method,
	      reqQuery: {},
	      reqBody: {} };
	  },
	
	  onSubmit: function onSubmit(e) {
	    e.preventDefault();
	
	    var self = this;
	
	    var qryStr = $.param(this.state.reqQuery),
	        body = this.state.reqBody;
	
	    this.setState({
	      result: null,
	      running: true });
	
	    $.ajax({
	      async: true,
	      timeout: 5000,
	      cache: false,
	      url: this.state.url + (qryStr.length ? "?" + qryStr : ""),
	      method: this.state.method,
	      dataType: "text",
	      data: body }).done(function gotResult() {
	      self.setStateIfMounted({
	        result: {
	          xhr: arguments[2] }
	      });
	    }).fail(function gotError(xhr) {
	      self.setStateIfMounted({
	        result: {
	          xhr: xhr
	        }
	      });
	    }).always(function allDone() {
	      self.setStateIfMounted({
	        running: false });
	    });
	  },
	
	  _mimeToCodeLanguage: function _mimeToCodeLanguage(mime) {
	
	    resultLanguage = "language-";
	
	    if (mime.indexOf("json")) {
	      resultLanguage += "javascript";
	    } else if (mime.indexOf("html") || mime.indexOf("xml")) {
	      resultLanguage += "xml";
	    } else {
	      resultLanguage += "none";
	    }
	  },
	
	  _buildResult: function _buildResult() {
	    if (this.state.result) {
	      var xhr = this.state.result.xhr;
	
	      var data = xhr.responseText,
	          resultType = 400 <= xhr.status ? "error" : "success";
	
	      var mime = xhr.getResponseHeader("Content-Type");
	
	      var label = "label " + ("error" === resultType ? "red" : "blue");
	
	      return React.createElement(
	        "div",
	        { className: "result" },
	        React.createElement(
	          "div",
	          { className: resultType },
	          React.createElement(
	            "p",
	            { className: "meta" },
	            React.createElement(
	              "span",
	              { className: label },
	              xhr.status,
	              " ",
	              xhr.statusText
	            ),
	            React.createElement(
	              "span",
	              { className: label },
	              mime
	            ),
	            React.createElement(
	              "span",
	              { className: label },
	              xhr.getResponseHeader("Content-Length"),
	              " bytes"
	            )
	          ),
	          React.createElement(CodeView, { mime: mime, code: data })
	        )
	      );
	    } else {
	      if (this.state.running) {
	        return React.createElement(Loader, { text: "Request in progress" });
	      } else {
	        return "";
	      }
	    }
	  },
	
	  _onQueryStringChange: function _onQueryStringChange(val) {
	    try {
	      this.setState({
	        reqQuery: JSON.parse(val),
	        canSubmit: true });
	    } catch (err) {
	      this.setState({
	        reqQuery: {},
	        canSubmit: false
	      });
	    }
	  },
	
	  _onBodyChange: function _onBodyChange(val) {
	    try {
	      this.setState({
	        reqBody: JSON.parse(val),
	        canSubmit: true });
	    } catch (err) {
	      this.setState({
	        reqBody: {},
	        canSubmit: false
	      });
	    }
	  },
	
	  _buildRequestForm: function _buildRequestForm() {
	    var body = "";
	    if ("POST" === this.state.method || "PUT" === this.state.method) {
	      var bodyJson = JSON.stringify(this.state.reqBody);
	
	      body = React.createElement(
	        "div",
	        { className: "form-group" },
	        React.createElement(
	          "label",
	          null,
	          "Form body (JSON)"
	        ),
	        React.createElement(JsonEditor, {
	          name: "bodyEditor",
	          ref: "bodyEditor",
	          onChange: this._onBodyChange,
	          value: bodyJson,
	          height: "200px" })
	      );
	    }
	
	    var qryStrJson = JSON.stringify(this.state.reqQuery),
	        urlQryStr = $.param(this.state.reqQuery);
	
	    return React.createElement(
	      "form",
	      { onSubmit: this.onSubmit },
	      React.createElement(
	        "div",
	        { className: "form-group" },
	        React.createElement(
	          "label",
	          null,
	          "Query string (JSON): ",
	          React.createElement(
	            "strong",
	            null,
	            urlQryStr
	          )
	        ),
	        React.createElement(JsonEditor, {
	          name: "qsEditor",
	          ref: "qsEditor",
	          onChange: this._onQueryStringChange,
	          value: qryStrJson })
	      ),
	      { body: body },
	      React.createElement(SubmitBtn, { label: "Run", disabled: !this.state.canSubmit })
	    );
	  },
	
	  render: function render() {
	    var error = this.state.error ? React.createElement(
	      "div",
	      { className: "error" },
	      this.state.error
	    ) : "";
	
	    return React.createElement(
	      "div",
	      { className: "page-route" },
	      React.createElement(
	        "h2",
	        null,
	        this.state.method,
	        " ",
	        this.state.url
	      ),
	      this._buildRequestForm(),
	      this._buildResult()
	    );
	  } });

/***/ }

});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9wYWdlcy9yb3V0ZXMvYXBwLmpzIiwid2VicGFjazovLy8uL3BhZ2VzL3JvdXRlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9wYWdlcy9yb3V0ZXMvcm91dGUuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxhQUFZLENBQUM7O0FBRWIsS0FBSSxLQUFLLEdBQUcsbUJBQU8sQ0FBQyxDQUFPLENBQUMsQ0FBQztBQUM3QixLQUFJLE1BQU0sR0FBRyxtQkFBTyxDQUFDLEdBQWMsQ0FBQyxDQUFDO0FBQ3JDLEtBQUksWUFBWSxHQUFHLE1BQU0sQ0FBQyxZQUFZLENBQUM7QUFDdkMsS0FBSSxZQUFZLEdBQUcsTUFBTSxDQUFDLFlBQVksQ0FBQztBQUN2QyxLQUFJLEtBQUssR0FBRyxNQUFNLENBQUMsS0FBSyxDQUFDOztBQUV6QixLQUFJLFVBQVUsR0FBRyxtQkFBTyxDQUFDLEdBQVMsQ0FBQyxDQUFDO0FBQ3BDLEtBQUksU0FBUyxHQUFHLG1CQUFPLENBQUMsR0FBUyxDQUFDLENBQUM7O0FBRW5DLEtBQUksR0FBRyxHQUFHLEtBQUssQ0FBQyxXQUFXLENBQUM7QUFDNUIsR0FBRSxXQUFXLEVBQUUsS0FBSzs7R0FFbEIsTUFBTSxFQUFFLFNBQVMsTUFBTSxHQUFHO0tBQ3hCLE9BQU8sS0FBSyxDQUFDLGFBQWEsQ0FBQyxZQUFZLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQ3REO0FBQ0gsRUFBQyxDQUFDLENBQUM7O0FBRUgsS0FBSSxNQUFNLEdBQUcsS0FBSyxDQUFDLGFBQWE7R0FDOUIsS0FBSztHQUNMLEVBQUUsT0FBTyxFQUFFLEdBQUcsRUFBRTtHQUNoQixLQUFLLENBQUMsYUFBYSxDQUFDLFlBQVksRUFBRSxFQUFFLElBQUksRUFBRSxRQUFRLEVBQUUsT0FBTyxFQUFFLFVBQVUsRUFBRSxDQUFDO0dBQzFFLEtBQUssQ0FBQyxhQUFhLENBQUMsS0FBSyxFQUFFLEVBQUUsSUFBSSxFQUFFLE9BQU8s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QyxLQUFLLENBQUMsR0FBRztRQUNmO09BQ0QsSUFBSSxDQUFDLGlCQUFpQixFQUFFO09BQ3hCLElBQUksQ0FBQyxZQUFZLEVBQUU7TUFDcEIsQ0FBQztJQUNILEVBQUUsQ0FBQyxDIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBSZWFjdCA9IHJlcXVpcmUoXCJyZWFjdFwiKTtcbnZhciBSb3V0ZXIgPSByZXF1aXJlKFwicmVhY3Qtcm91dGVyXCIpO1xudmFyIERlZmF1bHRSb3V0ZSA9IFJvdXRlci5EZWZhdWx0Um91dGU7XG52YXIgUm91dGVIYW5kbGVyID0gUm91dGVyLlJvdXRlSGFuZGxlcjtcbnZhciBSb3V0ZSA9IFJvdXRlci5Sb3V0ZTtcblxudmFyIFBhZ2VSb3V0ZXMgPSByZXF1aXJlKFwiLi9pbmRleFwiKTtcbnZhciBQYWdlUm91dGUgPSByZXF1aXJlKFwiLi9yb3V0ZVwiKTtcblxudmFyIEFwcCA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtcbiAgZGlzcGxheU5hbWU6IFwiQXBwXCIsXG5cbiAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoUm91dGVIYW5kbGVyLCB0aGlzLnByb3BzKTtcbiAgfVxufSk7XG5cbnZhciByb3V0ZXMgPSBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICBSb3V0ZSxcbiAgeyBoYW5kbGVyOiBBcHAgfSxcbiAgUmVhY3QuY3JlYXRlRWxlbWVudChEZWZhdWx0Um91dGUsIHsgbmFtZTogXCJyb3V0ZXNcIiwgaGFuZGxlcjogUGFnZVJvdXRlcyB9KSxcbiAgUmVhY3QuY3JlYXRlRWxlbWVudChSb3V0ZSwgeyBuYW1lOiBcInJvdXRlXCIsIHBhdGg6IFwiOmtleVwiLCBoYW5kbGVyOiBQYWdlUm91dGUgfSlcbik7XG5cblJvdXRlci5ydW4ocm91dGVzLCBSb3V0ZXIuSGFzaExvY2F0aW9uLCBmdW5jdGlvbiAoSGFuZGxlciwgc3RhdGUpIHtcbiAgUmVhY3QucmVuZGVyKFJlYWN0LmNyZWF0ZUVsZW1lbnQoSGFuZGxlciwgeyByb3V0ZXM6IHN0YXRlLnJvdXRlcywgcGFyYW1zOiBzdGF0ZS5wYXJhbXMsIHF1ZXJ5OiBzdGF0ZS5xdWVyeSB9KSwgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJyZWFjdC1yb290XCIpKTtcbn0pO1xuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC9Vc2Vycy9yYW0vZGV2L2pzL3dhaWdvLWZyYW1ld29yay93YWlnby9+L2JhYmVsLWxvYWRlcj9leHBlcmltZW50YWwmb3B0aW9uYWw9cnVudGltZSEuL3BhZ2VzL3JvdXRlcy9hcHAuanNcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcblxudmFyIFJlYWN0ID0gcmVxdWlyZShcInJlYWN0XCIpO1xuXG52YXIgUm91dGVyID0gcmVxdWlyZShcInJlYWN0LXJvdXRlclwiKSxcbiAgICBMaW5rID0gUm91dGVyLkxpbms7XG5cbnZhciBGaWx0ZXJMaXN0ID0gcmVxdWlyZShcIi4uLy4uL2NvbXBvbmVudHMvZmlsdGVyTGlzdFwiKSxcbiAgICBSZW5kZXJVdGlscyA9IHJlcXVpcmUoXCIuLi8uLi91dGlscy9yZW5kZXJVdGlsc1wiKTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdC5jcmVhdGVDbGFzcyh7XG4gIGRpc3BsYXlOYW1lOiBcImV4cG9ydHNcIixcblxuICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgIFwiZGl2XCIsXG4gICAgICB7IGNsYXNzTmFtZTogXCJwYWdlLXJvdXRlc1wiIH0sXG4gICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KEZpbHRlckxpc3QsIHtcbiAgICAgICAgYWpheFVybDogXCIvYWRtaW4vcm91dGVzP2Zvcm1hdD1qc29uXCIsXG4gICAgICAgIGFqYXhSZXNwb25zZURhdGFNYXBwZXI6IHRoaXMuX21hcEFqYXhEYXRhLFxuICAgICAgICBpdGVtRGlzcGxheU5hbWVGb3JtYXR0ZXI6IHRoaXMuX2dldEl0ZW1EaXNwbGF5TmFtZSxcbiAgICAgICAgaXRlbVJvdXRlOiBcInJvdXRlXCIgfSlcbiAgICApO1xuICB9LFxuXG4gIF9tYXBBamF4RGF0YTogZnVuY3Rpb24gX21hcEFqYXhEYXRhKGRhdGEpIHtcbiAgICBkYXRhID0gZGF0YSB8fCB7fTtcblxuICAgIHJldHVybiAoZGF0YS5yb3V0ZXMgfHwgW10pLm1hcChmdW5jdGlvbiAocikge1xuICAgICAgLy8gR0VUIC9leGFtcGxlL3BhdGggIC0tID4gIGdldC9leGFtcGxlL3BhdGhcbiAgICAgIHIua2V5ID0gci5tZXRob2QudG9Mb3dlckNhc2UoKSArIHIudXJsLnRvTG93ZXJDYXNlKCk7XG5cbiAgICAgIHJldHVybiByO1xuICAgIH0pO1xuICB9LFxuXG4gIF9nZXRJdGVtRGlzcGxheU5hbWU6IGZ1bmN0aW9uIF9nZXRJdGVtRGlzcGxheU5hbWUoaXRlbSkge1xuICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgXCJzcGFuXCIsXG4gICAgICBudWxsLFxuICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgXCJzcGFuXCIsXG4gICAgICAgIHsgY2xhc3NOYW1lOiBcIm1ldGhvZFwiIH0sXG4gICAgICAgIGl0ZW0ubWV0aG9kLnRvVXBwZXJDYXNlKClcbiAgICAgICksXG4gICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICBcInNwYW5cIixcbiAgICAgICAgeyBjbGFzc05hbWU6IFwidXJsXCIgfSxcbiAgICAgICAgaXRlbS51cmxcbiAgICAgIClcbiAgICApO1xuICB9IH0pO1xuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC9Vc2Vycy9yYW0vZGV2L2pzL3dhaWdvLWZyYW1ld29yay93YWlnby9+L2JhYmVsLWxvYWRlcj9leHBlcmltZW50YWwmb3B0aW9uYWw9cnVudGltZSEuL3BhZ2VzL3JvdXRlcy9pbmRleC5qc1xuICoqLyIsIlwidXNlIHN0cmljdFwiO1xuXG52YXIgUmVhY3QgPSByZXF1aXJlKFwicmVhY3RcIik7XG5cbnZhciBSb3V0ZXIgPSByZXF1aXJlKFwicmVhY3Qtcm91dGVyXCIpO1xuXG52YXIgTG9hZGVyID0gcmVxdWlyZShcIi4uLy4uL2NvbXBvbmVudHMvbG9hZGVyXCIpLFxuICAgIFN1Ym1pdEJ0biA9IHJlcXVpcmUoXCIuLi8uLi9jb21wb25lbnRzL3N1Ym1pdEJ1dHRvblwiKSxcbiAgICBKc29uRWRpdG9yID0gcmVxdWlyZShcIi4uLy4uL2NvbXBvbmVudHMvanNvbkVkaXRvclwiKSxcbiAgICBDb2RlVmlldyA9IHJlcXVpcmUoXCIuLi8uLi9jb21wb25lbnRzL2NvZGVWaWV3XCIpLFxuICAgIFJlbmRlclV0aWxzID0gcmVxdWlyZShcIi4uLy4uL3V0aWxzL3JlbmRlclV0aWxzXCIpLFxuICAgIEd1YXJkZWRTdGF0ZU1peGluID0gcmVxdWlyZShcIi4uLy4uL21peGlucy9ndWFyZGVkU3RhdGVcIik7XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3QuY3JlYXRlQ2xhc3Moe1xuICBkaXNwbGF5TmFtZTogXCJleHBvcnRzXCIsXG5cbiAgY29udGV4dFR5cGVzOiB7XG4gICAgcm91dGVyOiBSZWFjdC5Qcm9wVHlwZXMuZnVuY1xuICB9LFxuXG4gIG1peGluczogW0d1YXJkZWRTdGF0ZU1peGluXSxcblxuICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uIGdldEluaXRpYWxTdGF0ZSgpIHtcbiAgICB2YXIga2V5ID0gZGVjb2RlVVJJQ29tcG9uZW50KHRoaXMuY29udGV4dC5yb3V0ZXIuZ2V0Q3VycmVudFBhcmFtcygpLmtleSksXG4gICAgICAgIHNsYXNoUG9zID0ga2V5LmluZGV4T2YoXCIvXCIpLFxuICAgICAgICBtZXRob2QgPSBrZXkuc3Vic3RyKDAsIHNsYXNoUG9zKS50b1VwcGVyQ2FzZSgpLFxuICAgICAgICB1cmwgPSBrZXkuc3Vic3RyKHNsYXNoUG9zKTtcblxuICAgIHJldHVybiB7XG4gICAgICB1cmw6IHVybCxcbiAgICAgIG1ldGhvZDogbWV0aG9kLFxuICAgICAgcmVxUXVlcnk6IHt9LFxuICAgICAgcmVxQm9keToge30gfTtcbiAgfSxcblxuICBvblN1Ym1pdDogZnVuY3Rpb24gb25TdWJtaXQoZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgIHZhciBxcnlTdHIgPSAkLnBhcmFtKHRoaXMuc3RhdGUucmVxUXVlcnkpLFxuICAgICAgICBib2R5ID0gdGhpcy5zdGF0ZS5yZXFCb2R5O1xuXG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICByZXN1bHQ6IG51bGwsXG4gICAgICBydW5uaW5nOiB0cnVlIH0pO1xuXG4gICAgJC5hamF4KHtcbiAgICAgIGFzeW5jOiB0cnVlLFxuICAgICAgdGltZW91dDogNTAwMCxcbiAgICAgIGNhY2hlOiBmYWxzZSxcbiAgICAgIHVybDogdGhpcy5zdGF0ZS51cmwgKyAocXJ5U3RyLmxlbmd0aCA/IFwiP1wiICsgcXJ5U3RyIDogXCJcIiksXG4gICAgICBtZXRob2Q6IHRoaXMuc3RhdGUubWV0aG9kLFxuICAgICAgZGF0YVR5cGU6IFwidGV4dFwiLFxuICAgICAgZGF0YTogYm9keSB9KS5kb25lKGZ1bmN0aW9uIGdvdFJlc3VsdCgpIHtcbiAgICAgIHNlbGYuc2V0U3RhdGVJZk1vdW50ZWQoe1xuICAgICAgICByZXN1bHQ6IHtcbiAgICAgICAgICB4aHI6IGFyZ3VtZW50c1syXSB9XG4gICAgICB9KTtcbiAgICB9KS5mYWlsKGZ1bmN0aW9uIGdvdEVycm9yKHhocikge1xuICAgICAgc2VsZi5zZXRTdGF0ZUlmTW91bnRlZCh7XG4gICAgICAgIHJlc3VsdDoge1xuICAgICAgICAgIHhocjogeGhyXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pLmFsd2F5cyhmdW5jdGlvbiBhbGxEb25lKCkge1xuICAgICAgc2VsZi5zZXRTdGF0ZUlmTW91bnRlZCh7XG4gICAgICAgIHJ1bm5pbmc6IGZhbHNlIH0pO1xuICAgIH0pO1xuICB9LFxuXG4gIF9taW1lVG9Db2RlTGFuZ3VhZ2U6IGZ1bmN0aW9uIF9taW1lVG9Db2RlTGFuZ3VhZ2UobWltZSkge1xuXG4gICAgcmVzdWx0TGFuZ3VhZ2UgPSBcImxhbmd1YWdlLVwiO1xuXG4gICAgaWYgKG1pbWUuaW5kZXhPZihcImpzb25cIikpIHtcbiAgICAgIHJlc3VsdExhbmd1YWdlICs9IFwiamF2YXNjcmlwdFwiO1xuICAgIH0gZWxzZSBpZiAobWltZS5pbmRleE9mKFwiaHRtbFwiKSB8fCBtaW1lLmluZGV4T2YoXCJ4bWxcIikpIHtcbiAgICAgIHJlc3VsdExhbmd1YWdlICs9IFwieG1sXCI7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlc3VsdExhbmd1YWdlICs9IFwibm9uZVwiO1xuICAgIH1cbiAgfSxcblxuICBfYnVpbGRSZXN1bHQ6IGZ1bmN0aW9uIF9idWlsZFJlc3VsdCgpIHtcbiAgICBpZiAodGhpcy5zdGF0ZS5yZXN1bHQpIHtcbiAgICAgIHZhciB4aHIgPSB0aGlzLnN0YXRlLnJlc3VsdC54aHI7XG5cbiAgICAgIHZhciBkYXRhID0geGhyLnJlc3BvbnNlVGV4dCxcbiAgICAgICAgICByZXN1bHRUeXBlID0gNDAwIDw9IHhoci5zdGF0dXMgPyBcImVycm9yXCIgOiBcInN1Y2Nlc3NcIjtcblxuICAgICAgdmFyIG1pbWUgPSB4aHIuZ2V0UmVzcG9uc2VIZWFkZXIoXCJDb250ZW50LVR5cGVcIik7XG5cbiAgICAgIHZhciBsYWJlbCA9IFwibGFiZWwgXCIgKyAoXCJlcnJvclwiID09PSByZXN1bHRUeXBlID8gXCJyZWRcIiA6IFwiYmx1ZVwiKTtcblxuICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgIFwiZGl2XCIsXG4gICAgICAgIHsgY2xhc3NOYW1lOiBcInJlc3VsdFwiIH0sXG4gICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgXCJkaXZcIixcbiAgICAgICAgICB7IGNsYXNzTmFtZTogcmVzdWx0VHlwZSB9LFxuICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICBcInBcIixcbiAgICAgICAgICAgIHsgY2xhc3NOYW1lOiBcIm1ldGFcIiB9LFxuICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgXCJzcGFuXCIsXG4gICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiBsYWJlbCB9LFxuICAgICAgICAgICAgICB4aHIuc3RhdHVzLFxuICAgICAgICAgICAgICBcIiBcIixcbiAgICAgICAgICAgICAgeGhyLnN0YXR1c1RleHRcbiAgICAgICAgICAgICksXG4gICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICBcInNwYW5cIixcbiAgICAgICAgICAgICAgeyBjbGFzc05hbWU6IGxhYmVsIH0sXG4gICAgICAgICAgICAgIG1pbWVcbiAgICAgICAgICAgICksXG4gICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICBcInNwYW5cIixcbiAgICAgICAgICAgICAgeyBjbGFzc05hbWU6IGxhYmVsIH0sXG4gICAgICAgICAgICAgIHhoci5nZXRSZXNwb25zZUhlYWRlcihcIkNvbnRlbnQtTGVuZ3RoXCIpLFxuICAgICAgICAgICAgICBcIiBieXRlc1wiXG4gICAgICAgICAgICApXG4gICAgICAgICAgKSxcbiAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KENvZGVWaWV3LCB7IG1pbWU6IG1pbWUsIGNvZGU6IGRhdGEgfSlcbiAgICAgICAgKVxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHRoaXMuc3RhdGUucnVubmluZykge1xuICAgICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChMb2FkZXIsIHsgdGV4dDogXCJSZXF1ZXN0IGluIHByb2dyZXNzXCIgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gXCJcIjtcbiAgICAgIH1cbiAgICB9XG4gIH0sXG5cbiAgX29uUXVlcnlTdHJpbmdDaGFuZ2U6IGZ1bmN0aW9uIF9vblF1ZXJ5U3RyaW5nQ2hhbmdlKHZhbCkge1xuICAgIHRyeSB7XG4gICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgcmVxUXVlcnk6IEpTT04ucGFyc2UodmFsKSxcbiAgICAgICAgY2FuU3VibWl0OiB0cnVlIH0pO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIHJlcVF1ZXJ5OiB7fSxcbiAgICAgICAgY2FuU3VibWl0OiBmYWxzZVxuICAgICAgfSk7XG4gICAgfVxuICB9LFxuXG4gIF9vbkJvZHlDaGFuZ2U6IGZ1bmN0aW9uIF9vbkJvZHlDaGFuZ2UodmFsKSB7XG4gICAgdHJ5IHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICByZXFCb2R5OiBKU09OLnBhcnNlKHZhbCksXG4gICAgICAgIGNhblN1Ym1pdDogdHJ1ZSB9KTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICByZXFCb2R5OiB7fSxcbiAgICAgICAgY2FuU3VibWl0OiBmYWxzZVxuICAgICAgfSk7XG4gICAgfVxuICB9LFxuXG4gIF9idWlsZFJlcXVlc3RGb3JtOiBmdW5jdGlvbiBfYnVpbGRSZXF1ZXN0Rm9ybSgpIHtcbiAgICB2YXIgYm9keSA9IFwiXCI7XG4gICAgaWYgKFwiUE9TVFwiID09PSB0aGlzLnN0YXRlLm1ldGhvZCB8fCBcIlBVVFwiID09PSB0aGlzLnN0YXRlLm1ldGhvZCkge1xuICAgICAgdmFyIGJvZHlKc29uID0gSlNPTi5zdHJpbmdpZnkodGhpcy5zdGF0ZS5yZXFCb2R5KTtcblxuICAgICAgYm9keSA9IFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgIFwiZGl2XCIsXG4gICAgICAgIHsgY2xhc3NOYW1lOiBcImZvcm0tZ3JvdXBcIiB9LFxuICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgIFwibGFiZWxcIixcbiAgICAgICAgICBudWxsLFxuICAgICAgICAgIFwiRm9ybSBib2R5IChKU09OKVwiXG4gICAgICAgICksXG4gICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoSnNvbkVkaXRvciwge1xuICAgICAgICAgIG5hbWU6IFwiYm9keUVkaXRvclwiLFxuICAgICAgICAgIHJlZjogXCJib2R5RWRpdG9yXCIsXG4gICAgICAgICAgb25DaGFuZ2U6IHRoaXMuX29uQm9keUNoYW5nZSxcbiAgICAgICAgICB2YWx1ZTogYm9keUpzb24sXG4gICAgICAgICAgaGVpZ2h0OiBcIjIwMHB4XCIgfSlcbiAgICAgICk7XG4gICAgfVxuXG4gICAgdmFyIHFyeVN0ckpzb24gPSBKU09OLnN0cmluZ2lmeSh0aGlzLnN0YXRlLnJlcVF1ZXJ5KSxcbiAgICAgICAgdXJsUXJ5U3RyID0gJC5wYXJhbSh0aGlzLnN0YXRlLnJlcVF1ZXJ5KTtcblxuICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgXCJmb3JtXCIsXG4gICAgICB7IG9uU3VibWl0OiB0aGlzLm9uU3VibWl0IH0sXG4gICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICBcImRpdlwiLFxuICAgICAgICB7IGNsYXNzTmFtZTogXCJmb3JtLWdyb3VwXCIgfSxcbiAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICBcImxhYmVsXCIsXG4gICAgICAgICAgbnVsbCxcbiAgICAgICAgICBcIlF1ZXJ5IHN0cmluZyAoSlNPTik6IFwiLFxuICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICBcInN0cm9uZ1wiLFxuICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgIHVybFFyeVN0clxuICAgICAgICAgIClcbiAgICAgICAgKSxcbiAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChKc29uRWRpdG9yLCB7XG4gICAgICAgICAgbmFtZTogXCJxc0VkaXRvclwiLFxuICAgICAgICAgIHJlZjogXCJxc0VkaXRvclwiLFxuICAgICAgICAgIG9uQ2hhbmdlOiB0aGlzLl9vblF1ZXJ5U3RyaW5nQ2hhbmdlLFxuICAgICAgICAgIHZhbHVlOiBxcnlTdHJKc29uIH0pXG4gICAgICApLFxuICAgICAgeyBib2R5OiBib2R5IH0sXG4gICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFN1Ym1pdEJ0biwgeyBsYWJlbDogXCJSdW5cIiwgZGlzYWJsZWQ6ICF0aGlzLnN0YXRlLmNhblN1Ym1pdCB9KVxuICAgICk7XG4gIH0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgdmFyIGVycm9yID0gdGhpcy5zdGF0ZS5lcnJvciA/IFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICBcImRpdlwiLFxuICAgICAgeyBjbGFzc05hbWU6IFwiZXJyb3JcIiB9LFxuICAgICAgdGhpcy5zdGF0ZS5lcnJvclxuICAgICkgOiBcIlwiO1xuXG4gICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICBcImRpdlwiLFxuICAgICAgeyBjbGFzc05hbWU6IFwicGFnZS1yb3V0ZVwiIH0sXG4gICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICBcImgyXCIsXG4gICAgICAgIG51bGwsXG4gICAgICAgIHRoaXMuc3RhdGUubWV0aG9kLFxuICAgICAgICBcIiBcIixcbiAgICAgICAgdGhpcy5zdGF0ZS51cmxcbiAgICAgICksXG4gICAgICB0aGlzLl9idWlsZFJlcXVlc3RGb3JtKCksXG4gICAgICB0aGlzLl9idWlsZFJlc3VsdCgpXG4gICAgKTtcbiAgfSB9KTtcblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAvVXNlcnMvcmFtL2Rldi9qcy93YWlnby1mcmFtZXdvcmsvd2FpZ28vfi9iYWJlbC1sb2FkZXI/ZXhwZXJpbWVudGFsJm9wdGlvbmFsPXJ1bnRpbWUhLi9wYWdlcy9yb3V0ZXMvcm91dGUuanNcbiAqKi8iXSwic291cmNlUm9vdCI6IiIsImZpbGUiOiJhZG1pbi5yb3V0ZXMuanMifQ==