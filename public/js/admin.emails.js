webpackJsonp([3],{

/***/ 0:
/***/ function(module, exports, __webpack_require__) {

	"use strict";
	
	var React = __webpack_require__(11);
	
	var _ = __webpack_require__(218);
	
	var UsersPage = __webpack_require__(222);
	var SendPage = __webpack_require__(223);
	
	var App = React.createClass({
	  displayName: "App",
	
	  getInitialState: function getInitialState() {
	    return {
	      users: [],
	      template: "" };
	  },
	  addUser: function addUser(user) {
	    var existing = _.find(this.state.users, function (u) {
	      return u._id === user._id;
	    });
	
	    if (!existing) {
	      this.setState({
	        users: this.state.users.concat([user])
	      });
	    }
	  },
	  removeUser: function removeUser(userOrId) {
	    if (userOrId._id) {
	      userOrId = userOrId._id;
	    }
	
	    var newUsers = this.state.users.filter(function (u) {
	      return u._id !== userOrId;
	    });
	
	    this.setState({
	      users: newUsers
	    });
	  },
	  clearUsers: function clearUsers() {
	    this.setState({
	      users: []
	    });
	  },
	  render: function render() {
	    return React.createElement(
	      "div",
	      { className: "row page-emails" },
	      React.createElement(
	        "div",
	        { className: "col s12" },
	        React.createElement(
	          "ul",
	          { className: "tabs" },
	          React.createElement(
	            "li",
	            { className: "tab col s3" },
	            React.createElement(
	              "a",
	              { className: "active", href: "#users" },
	              React.createElement(
	                "span",
	                { "class": "badge" },
	                "1."
	              ),
	              " Select users"
	            )
	          ),
	          React.createElement(
	            "li",
	            { className: "tab col s3" },
	            React.createElement(
	              "a",
	              { href: "#send" },
	              React.createElement(
	                "span",
	                { "class": "badge" },
	                "2."
	              ),
	              " Send"
	            )
	          )
	        )
	      ),
	      React.createElement(
	        "section",
	        { className: "tab-content" },
	        React.createElement(
	          "div",
	          { id: "users", className: "col s12" },
	          React.createElement(UsersPage, {
	            users: this.state.users,
	            addUser: this.addUser,
	            removeUser: this.removeUser,
	            clearUsers: this.clearUsers })
	        ),
	        React.createElement(
	          "div",
	          { id: "send", className: "col s12" },
	          React.createElement(SendPage, {
	            users: this.state.users })
	        )
	      )
	    );
	  }
	});
	
	React.render(React.createElement(App, null), document.getElementById("react-root"));

/***/ },

/***/ 222:
/***/ function(module, exports, __webpack_require__) {

	"use strict";
	
	var React = __webpack_require__(11);
	
	var Button = __webpack_require__(208);
	var ModelTable = __webpack_require__(217);
	
	module.exports = React.createClass({
	  displayName: "exports",
	
	  propTypes: {
	    users: React.PropTypes.array,
	    addUser: React.PropTypes.func },
	
	  getDefaultProps: function getDefaultProps() {
	    return {
	      users: [],
	      addUser: null };
	  },
	
	  onRowClick: function onRowClick(user) {
	    this.props.addUser(user);
	  },
	
	  render: function render() {
	    var self = this;
	
	    var columns = [{
	      name: "username"
	    }];
	
	    var users = React.createElement(
	      "em",
	      null,
	      "None selected"
	    );
	
	    if (this.props.users.length) {
	      users = this.props.users.map(function (user) {
	        return React.createElement(
	          "li",
	          { className: "collection-item" },
	          user.username,
	          React.createElement(
	            "a",
	            { href: "#!", className: "secondary-content",
	              "data-id": user._id, onClick: self._onRemoveUser },
	            React.createElement("i", { className: "fa fa-remove" })
	          )
	        );
	      });
	
	      users = React.createElement(
	        "div",
	        null,
	        React.createElement(Button, { label: "Clear all", size: "small", onClick: this._onClear }),
	        React.createElement(
	          "ul",
	          { className: "collection" },
	          users
	        )
	      );
	    }
	
	    return React.createElement(
	      "div",
	      { className: "row" },
	      React.createElement(
	        "div",
	        { className: "col s12 m5" },
	        React.createElement(ModelTable, {
	          modelName: "User",
	          columns: columns,
	          excludeRows: this.props.users,
	          onRowClick: this.onRowClick })
	      ),
	      React.createElement(
	        "div",
	        { className: "col s12 m6 offset-m1 selected-users" },
	        React.createElement(
	          "h2",
	          null,
	          "Selected users:"
	        ),
	        users
	      )
	    );
	  },
	
	  _onRemoveUser: function _onRemoveUser(e) {
	    e.preventDefault();
	
	    this.props.removeUser(e.currentTarget.dataset.id);
	  },
	
	  _onClear: function _onClear() {
	    this.props.clearUsers();
	  } });

/***/ },

/***/ 223:
/***/ function(module, exports, __webpack_require__) {

	"use strict";
	
	var React = __webpack_require__(11);
	
	var Button = __webpack_require__(208);
	
	module.exports = React.createClass({
	  displayName: "exports",
	
	  propTypes: {
	    users: React.PropTypes.array },
	
	  getDefaultProps: function getDefaultProps() {
	    return {
	      users: [] };
	  },
	
	  render: function render() {
	    var sendBtnLabel = "Send to " + this.props.users.length + " users";
	
	    var content = "";
	
	    if (!this.props.users.length) {
	      content = React.createElement(
	        "strong",
	        null,
	        "Please select some users first."
	      );
	    } else {
	      content = React.createElement(
	        "div",
	        null,
	        React.createElement(
	          "div",
	          { className: "row" },
	          React.createElement(
	            "div",
	            { className: "col m6 s12" },
	            "editor"
	          ),
	          React.createElement(
	            "div",
	            { className: "col m6 m-offset1 s12" },
	            "preview"
	          )
	        ),
	        React.createElement(Button, { label: sendBtnLabel })
	      );
	    }
	
	    return React.createElement(
	      "div",
	      { className: "content-send" },
	      content
	    );
	  }
	
	});

/***/ }

});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9wYWdlcy9lbWFpbHMvYXBwLmpzIiwid2VicGFjazovLy8uL3BhZ2VzL2VtYWlscy91c2Vycy5qcyIsIndlYnBhY2s6Ly8vLi9wYWdlcy9lbWFpbHMvc2VuZC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBLGFBQVksQ0FBQzs7QUFFYixLQUFJLEtBQUssR0FBRyxtQkFBTyxDQUFDLEVBQU8sQ0FBQyxDQUFDOztBQUU3QixLQUFJLENBQUMsR0FBRyxtQkFBTyxDQUFDLEdBQW9CLENBQUMsQ0FBQzs7QUFFdEMsS0FBSSxTQUFTLEdBQUcsbUJBQU8sQ0FBQyxHQUFTLENBQUMsQ0FBQztBQUNuQyxLQUFJLFFBQVEsR0FBRyxtQkFBTyxDQUFDLEdBQVEsQ0FBQyxDQUFDOztBQUVqQyxLQUFJLEdBQUcsR0FBRyxLQUFLLENBQUMsV0FBVyxDQUFDO0FBQzVCLEdBQUUsV0FBVyxFQUFFLEtBQUs7O0dBRWxCLGVBQWUsRUFBRSxTQUFTLGVBQWUsR0FBRztLQUMxQyxPQUFPO09BQ0wsS0FBSyxFQUFFLEVBQUU7T0FDVCxRQUFRLEVBQUUsRUFBRSxFQUFFLENBQUM7SUFDbEI7R0FDRCxPQUFPLEVBQUUsU0FBUyxPQUFPLENBQUMsSUFBSSxFQUFFO0tBQzlCLElBQUksUUFBUSxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLEVBQUUsVUFBVSxDQUFDLEVBQUU7T0FDbkQsT0FBTyxDQUFDLENBQUMsR0FBRyxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUM7QUFDaEMsTUFBSyxDQUFDLENBQUM7O0tBRUgsSUFBSSxDQUFDLFFBQVEsRUFBRTtPQUNiLElBQUksQ0FBQyxRQUFRLENBQUM7U0FDWixLQUFLLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDdkMsQ0FBQyxDQUFDO01BQ0o7SUFDRjtHQUNELFVBQVUsRUFBRSxT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LEtBQUssQ0FBQyxNQUFNLEVBQUU7T0FDNUIsT0FBTyxHQUFHLEtBQUssQ0FBQyxhQUFhO1NBQzNCLFFBQVE7U0FDUixJQUFJO1NBQ0osaUNBQWlDO1FBQ2xDLENBQUM7TUFDSCxNQUFNO09BQ0wsT0FBTyxHQUFHLEtBQUssQ0FBQyxhQUFhO1NBQzNCLEtBQUs7U0FDTCxJQUFJO1NBQ0osS0FBSyxDQUFDLGFBQWE7V0FDakIsS0FBSztXQUNMLEVBQUUsU0FBUyxFQUFFLEtBQUssRUFBRTtXQUNwQixLQUFLLENBQUMsYUFBYTthQUNqQixLQUFLO2FBQ0wsRUFBRSxTQUFTLEVBQUUsWUFBWSxFQUFFO2FBQzNCLFFBQVE7WUFDVDtXQUNELEtBQUssQ0FBQyxhQUFhO2FBQ2pCLEtBQUs7YUFDTCxFQUFFLFNBQVMsRUFBRSxzQkFBc0IsRUFBRTthQUNyQyxTQUFTO1lBQ1Y7VUFDRjtTQUNELEtBQUssQ0FBQyxhQUFhLENBQUMsTUFBTSxFQUFFLEVBQUUsS0FBSyxFQUFFLFlBQVksRUFBRSxDQUFDO1FBQ3JELENBQUM7QUFDUixNQUFLOztLQUVELE9BQU8sS0FBSyxDQUFDLGFBQWE7T0FDeEIsS0FBSztPQUNMLEVBQUUsU0FBUyxFQUFFLGNBQWMsRUFBRTtPQUM3QixPQUFPO01BQ1IsQ0FBQztBQUNOLElBQUc7O0VBRUYsQ0FBQyxDIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBSZWFjdCA9IHJlcXVpcmUoXCJyZWFjdFwiKTtcblxudmFyIF8gPSByZXF1aXJlKFwiLi4vLi4vdXRpbHMvbG9kYXNoXCIpO1xuXG52YXIgVXNlcnNQYWdlID0gcmVxdWlyZShcIi4vdXNlcnNcIik7XG52YXIgU2VuZFBhZ2UgPSByZXF1aXJlKFwiLi9zZW5kXCIpO1xuXG52YXIgQXBwID0gUmVhY3QuY3JlYXRlQ2xhc3Moe1xuICBkaXNwbGF5TmFtZTogXCJBcHBcIixcblxuICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uIGdldEluaXRpYWxTdGF0ZSgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdXNlcnM6IFtdLFxuICAgICAgdGVtcGxhdGU6IFwiXCIgfTtcbiAgfSxcbiAgYWRkVXNlcjogZnVuY3Rpb24gYWRkVXNlcih1c2VyKSB7XG4gICAgdmFyIGV4aXN0aW5nID0gXy5maW5kKHRoaXMuc3RhdGUudXNlcnMsIGZ1bmN0aW9uICh1KSB7XG4gICAgICByZXR1cm4gdS5faWQgPT09IHVzZXIuX2lkO1xuICAgIH0pO1xuXG4gICAgaWYgKCFleGlzdGluZykge1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIHVzZXJzOiB0aGlzLnN0YXRlLnVzZXJzLmNvbmNhdChbdXNlcl0pXG4gICAgICB9KTtcbiAgICB9XG4gIH0sXG4gIHJlbW92ZVVzZXI6IGZ1bmN0aW9uIHJlbW92ZVVzZXIodXNlck9ySWQpIHtcbiAgICBpZiAodXNlck9ySWQuX2lkKSB7XG4gICAgICB1c2VyT3JJZCA9IHVzZXJPcklkLl9pZDtcbiAgICB9XG5cbiAgICB2YXIgbmV3VXNlcnMgPSB0aGlzLnN0YXRlLnVzZXJzLmZpbHRlcihmdW5jdGlvbiAodSkge1xuICAgICAgcmV0dXJuIHUuX2lkICE9PSB1c2VyT3JJZDtcbiAgICB9KTtcblxuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgdXNlcnM6IG5ld1VzZXJzXG4gICAgfSk7XG4gIH0sXG4gIGNsZWFyVXNlcnM6IGZ1bmN0aW9uIGNsZWFyVXNlcnMoKSB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICB1c2VyczogW11cbiAgICB9KTtcbiAgfSxcbiAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICBcImRpdlwiLFxuICAgICAgeyBjbGFzc05hbWU6IFwicm93IHBhZ2UtZW1haWxzXCIgfSxcbiAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgIFwiZGl2XCIsXG4gICAgICAgIHsgY2xhc3NOYW1lOiBcImNvbCBzMTJcIiB9LFxuICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgIFwidWxcIixcbiAgICAgICAgICB7IGNsYXNzTmFtZTogXCJ0YWJzXCIgfSxcbiAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgXCJsaVwiLFxuICAgICAgICAgICAgeyBjbGFzc05hbWU6IFwidGFiIGNvbCBzM1wiIH0sXG4gICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICBcImFcIixcbiAgICAgICAgICAgICAgeyBjbGFzc05hbWU6IFwiYWN0aXZlXCIsIGhyZWY6IFwiI3VzZXJzXCIgfSxcbiAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICBcInNwYW5cIixcbiAgICAgICAgICAgICAgICB7IFwiY2xhc3NcIjogXCJiYWRnZVwiIH0sXG4gICAgICAgICAgICAgICAgXCIxLlwiXG4gICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgIFwiIFNlbGVjdCB1c2Vyc1wiXG4gICAgICAgICAgICApXG4gICAgICAgICAgKSxcbiAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgXCJsaVwiLFxuICAgICAgICAgICAgeyBjbGFzc05hbWU6IFwidGFiIGNvbCBzM1wiIH0sXG4gICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICBcImFcIixcbiAgICAgICAgICAgICAgeyBocmVmOiBcIiNzZW5kXCIgfSxcbiAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICBcInNwYW5cIixcbiAgICAgICAgICAgICAgICB7IFwiY2xhc3NcIjogXCJiYWRnZVwiIH0sXG4gICAgICAgICAgICAgICAgXCIyLlwiXG4gICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgIFwiIFNlbmRcIlxuICAgICAgICAgICAgKVxuICAgICAgICAgIClcbiAgICAgICAgKVxuICAgICAgKSxcbiAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgIFwic2VjdGlvblwiLFxuICAgICAgICB7IGNsYXNzTmFtZTogXCJ0YWItY29udGVudFwiIH0sXG4gICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgXCJkaXZcIixcbiAgICAgICAgICB7IGlkOiBcInVzZXJzXCIsIGNsYXNzTmFtZTogXCJjb2wgczEyXCIgfSxcbiAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFVzZXJzUGFnZSwge1xuICAgICAgICAgICAgdXNlcnM6IHRoaXMuc3RhdGUudXNlcnMsXG4gICAgICAgICAgICBhZGRVc2VyOiB0aGlzLmFkZFVzZXIsXG4gICAgICAgICAgICByZW1vdmVVc2VyOiB0aGlzLnJlbW92ZVVzZXIsXG4gICAgICAgICAgICBjbGVhclVzZXJzOiB0aGlzLmNsZWFyVXNlcnMgfSlcbiAgICAgICAgKSxcbiAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICBcImRpdlwiLFxuICAgICAgICAgIHsgaWQ6IFwic2VuZFwiLCBjbGFzc05hbWU6IFwiY29sIHMxMlwiIH0sXG4gICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChTZW5kUGFnZSwge1xuICAgICAgICAgICAgdXNlcnM6IHRoaXMuc3RhdGUudXNlcnMgfSlcbiAgICAgICAgKVxuICAgICAgKVxuICAgICk7XG4gIH1cbn0pO1xuXG5SZWFjdC5yZW5kZXIoUmVhY3QuY3JlYXRlRWxlbWVudChBcHAsIG51bGwpLCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInJlYWN0LXJvb3RcIikpO1xuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC9Vc2Vycy9yYW0vZGV2L2pzL3dhaWdvLWZyYW1ld29yay93YWlnby9+L2JhYmVsLWxvYWRlcj9leHBlcmltZW50YWwmb3B0aW9uYWw9cnVudGltZSEuL3BhZ2VzL2VtYWlscy9hcHAuanNcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcblxudmFyIFJlYWN0ID0gcmVxdWlyZShcInJlYWN0XCIpO1xuXG52YXIgQnV0dG9uID0gcmVxdWlyZShcIi4uLy4uL2NvbXBvbmVudHMvYnV0dG9uXCIpO1xudmFyIE1vZGVsVGFibGUgPSByZXF1aXJlKFwiLi4vLi4vY29tcG9uZW50cy9tb2RlbFRhYmxlXCIpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtcbiAgZGlzcGxheU5hbWU6IFwiZXhwb3J0c1wiLFxuXG4gIHByb3BUeXBlczoge1xuICAgIHVzZXJzOiBSZWFjdC5Qcm9wVHlwZXMuYXJyYXksXG4gICAgYWRkVXNlcjogUmVhY3QuUHJvcFR5cGVzLmZ1bmMgfSxcblxuICBnZXREZWZhdWx0UHJvcHM6IGZ1bmN0aW9uIGdldERlZmF1bHRQcm9wcygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdXNlcnM6IFtdLFxuICAgICAgYWRkVXNlcjogbnVsbCB9O1xuICB9LFxuXG4gIG9uUm93Q2xpY2s6IGZ1bmN0aW9uIG9uUm93Q2xpY2sodXNlcikge1xuICAgIHRoaXMucHJvcHMuYWRkVXNlcih1c2VyKTtcbiAgfSxcblxuICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICB2YXIgY29sdW1ucyA9IFt7XG4gICAgICBuYW1lOiBcInVzZXJuYW1lXCJcbiAgICB9XTtcblxuICAgIHZhciB1c2VycyA9IFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICBcImVtXCIsXG4gICAgICBudWxsLFxuICAgICAgXCJOb25lIHNlbGVjdGVkXCJcbiAgICApO1xuXG4gICAgaWYgKHRoaXMucHJvcHMudXNlcnMubGVuZ3RoKSB7XG4gICAgICB1c2VycyA9IHRoaXMucHJvcHMudXNlcnMubWFwKGZ1bmN0aW9uICh1c2VyKSB7XG4gICAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgIFwibGlcIixcbiAgICAgICAgICB7IGNsYXNzTmFtZTogXCJjb2xsZWN0aW9uLWl0ZW1cIiB9LFxuICAgICAgICAgIHVzZXIudXNlcm5hbWUsXG4gICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgIFwiYVwiLFxuICAgICAgICAgICAgeyBocmVmOiBcIiMhXCIsIGNsYXNzTmFtZTogXCJzZWNvbmRhcnktY29udGVudFwiLFxuICAgICAgICAgICAgICBcImRhdGEtaWRcIjogdXNlci5faWQsIG9uQ2xpY2s6IHNlbGYuX29uUmVtb3ZlVXNlciB9LFxuICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcImlcIiwgeyBjbGFzc05hbWU6IFwiZmEgZmEtcmVtb3ZlXCIgfSlcbiAgICAgICAgICApXG4gICAgICAgICk7XG4gICAgICB9KTtcblxuICAgICAgdXNlcnMgPSBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICBcImRpdlwiLFxuICAgICAgICBudWxsLFxuICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KEJ1dHRvbiwgeyBsYWJlbDogXCJDbGVhciBhbGxcIiwgc2l6ZTogXCJzbWFsbFwiLCBvbkNsaWNrOiB0aGlzLl9vbkNsZWFyIH0pLFxuICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgIFwidWxcIixcbiAgICAgICAgICB7IGNsYXNzTmFtZTogXCJjb2xsZWN0aW9uXCIgfSxcbiAgICAgICAgICB1c2Vyc1xuICAgICAgICApXG4gICAgICApO1xuICAgIH1cblxuICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgXCJkaXZcIixcbiAgICAgIHsgY2xhc3NOYW1lOiBcInJvd1wiIH0sXG4gICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICBcImRpdlwiLFxuICAgICAgICB7IGNsYXNzTmFtZTogXCJjb2wgczEyIG01XCIgfSxcbiAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChNb2RlbFRhYmxlLCB7XG4gICAgICAgICAgbW9kZWxOYW1lOiBcIlVzZXJcIixcbiAgICAgICAgICBjb2x1bW5zOiBjb2x1bW5zLFxuICAgICAgICAgIGV4Y2x1ZGVSb3dzOiB0aGlzLnByb3BzLnVzZXJzLFxuICAgICAgICAgIG9uUm93Q2xpY2s6IHRoaXMub25Sb3dDbGljayB9KVxuICAgICAgKSxcbiAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgIFwiZGl2XCIsXG4gICAgICAgIHsgY2xhc3NOYW1lOiBcImNvbCBzMTIgbTYgb2Zmc2V0LW0xIHNlbGVjdGVkLXVzZXJzXCIgfSxcbiAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICBcImgyXCIsXG4gICAgICAgICAgbnVsbCxcbiAgICAgICAgICBcIlNlbGVjdGVkIHVzZXJzOlwiXG4gICAgICAgICksXG4gICAgICAgIHVzZXJzXG4gICAgICApXG4gICAgKTtcbiAgfSxcblxuICBfb25SZW1vdmVVc2VyOiBmdW5jdGlvbiBfb25SZW1vdmVVc2VyKGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICB0aGlzLnByb3BzLnJlbW92ZVVzZXIoZS5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuaWQpO1xuICB9LFxuXG4gIF9vbkNsZWFyOiBmdW5jdGlvbiBfb25DbGVhcigpIHtcbiAgICB0aGlzLnByb3BzLmNsZWFyVXNlcnMoKTtcbiAgfSB9KTtcblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAvVXNlcnMvcmFtL2Rldi9qcy93YWlnby1mcmFtZXdvcmsvd2FpZ28vfi9iYWJlbC1sb2FkZXI/ZXhwZXJpbWVudGFsJm9wdGlvbmFsPXJ1bnRpbWUhLi9wYWdlcy9lbWFpbHMvdXNlcnMuanNcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcblxudmFyIFJlYWN0ID0gcmVxdWlyZShcInJlYWN0XCIpO1xuXG52YXIgQnV0dG9uID0gcmVxdWlyZShcIi4uLy4uL2NvbXBvbmVudHMvYnV0dG9uXCIpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtcbiAgZGlzcGxheU5hbWU6IFwiZXhwb3J0c1wiLFxuXG4gIHByb3BUeXBlczoge1xuICAgIHVzZXJzOiBSZWFjdC5Qcm9wVHlwZXMuYXJyYXkgfSxcblxuICBnZXREZWZhdWx0UHJvcHM6IGZ1bmN0aW9uIGdldERlZmF1bHRQcm9wcygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdXNlcnM6IFtdIH07XG4gIH0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgdmFyIHNlbmRCdG5MYWJlbCA9IFwiU2VuZCB0byBcIiArIHRoaXMucHJvcHMudXNlcnMubGVuZ3RoICsgXCIgdXNlcnNcIjtcblxuICAgIHZhciBjb250ZW50ID0gXCJcIjtcblxuICAgIGlmICghdGhpcy5wcm9wcy51c2Vycy5sZW5ndGgpIHtcbiAgICAgIGNvbnRlbnQgPSBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICBcInN0cm9uZ1wiLFxuICAgICAgICBudWxsLFxuICAgICAgICBcIlBsZWFzZSBzZWxlY3Qgc29tZSB1c2VycyBmaXJzdC5cIlxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29udGVudCA9IFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgIFwiZGl2XCIsXG4gICAgICAgIG51bGwsXG4gICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgXCJkaXZcIixcbiAgICAgICAgICB7IGNsYXNzTmFtZTogXCJyb3dcIiB9LFxuICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICBcImRpdlwiLFxuICAgICAgICAgICAgeyBjbGFzc05hbWU6IFwiY29sIG02IHMxMlwiIH0sXG4gICAgICAgICAgICBcImVkaXRvclwiXG4gICAgICAgICAgKSxcbiAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgXCJkaXZcIixcbiAgICAgICAgICAgIHsgY2xhc3NOYW1lOiBcImNvbCBtNiBtLW9mZnNldDEgczEyXCIgfSxcbiAgICAgICAgICAgIFwicHJldmlld1wiXG4gICAgICAgICAgKVxuICAgICAgICApLFxuICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KEJ1dHRvbiwgeyBsYWJlbDogc2VuZEJ0bkxhYmVsIH0pXG4gICAgICApO1xuICAgIH1cblxuICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgXCJkaXZcIixcbiAgICAgIHsgY2xhc3NOYW1lOiBcImNvbnRlbnQtc2VuZFwiIH0sXG4gICAgICBjb250ZW50XG4gICAgKTtcbiAgfVxuXG59KTtcblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAvVXNlcnMvcmFtL2Rldi9qcy93YWlnby1mcmFtZXdvcmsvd2FpZ28vfi9iYWJlbC1sb2FkZXI/ZXhwZXJpbWVudGFsJm9wdGlvbmFsPXJ1bnRpbWUhLi9wYWdlcy9lbWFpbHMvc2VuZC5qc1xuICoqLyJdLCJzb3VyY2VSb290IjoiIiwiZmlsZSI6ImFkbWluLmVtYWlscy5qcyJ9